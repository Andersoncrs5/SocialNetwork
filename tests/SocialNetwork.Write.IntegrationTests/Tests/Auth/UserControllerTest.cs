using System.Net;
using System.Net.Http.Headers;
using System.Net.Http.Json;
using FluentAssertions;
using SocialNetwork.Contracts.Utils.Res.http;
using SocialNetwork.Write.API.dto.User;
using SocialNetwork.Write.IntegrationTests.Config;
using SocialNetwork.Write.IntegrationTests.Tests.Utils.Classes;
using Xunit.Abstractions;

namespace SocialNetwork.Write.IntegrationTests.Tests.Auth;

public class UserControllerTest : BaseIntegrationTest
{
    private readonly HelperTest _helper;
    private readonly ITestOutputHelper _output;
    private readonly string _url = "api/v1/user";

    public UserControllerTest(WriteApiFactory factory, ITestOutputHelper output) 
        : base(factory)
    {
        _output = output;
        _helper = new HelperTest(Client); 
    }

    [Fact]
    public async Task DeleteUser_Success()
    {
        UserTestResult result = await _helper.CreateNewUser();
        
        Client.DefaultRequestHeaders.Authorization = 
            new AuthenticationHeaderValue("Bearer-", result.Tokens.Token);

        HttpResponseMessage message = await Client.DeleteAsync(_url);
        _output.WriteLine(await message.Content.ReadAsStringAsync());
        message.StatusCode.Should().Be(HttpStatusCode.OK);

        ResponseHttp<object>? http = await message.Content.ReadFromJsonAsync<ResponseHttp<object>>();
        
        http.Should().NotBeNull();
        http.Data.Should().BeNull();
        
        http.Success.Should().BeTrue();
        http.TraceId.Should().NotBeNullOrWhiteSpace();
        http.DetailsError.Should().BeNull();
    }

    [Fact]
    public async Task UpdateUser_Success_AllFields()
    {
        UserTestResult result = await _helper.CreateNewUser();

        UpdateUserDto dto = new UpdateUserDto()
        {
            Bio = "AnyBio",
            BirthDate = DateTime.UtcNow.AddYears(-30),
            Country = "USA",
            CoverImageUrl = "data:image/jpeg;base64,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",
            FullName = "pochita the chainsaw demon",
            ImageProfileUrl = "data:image/jpeg;base64,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",
            IsPrivate = false,
            Language = "EN",
            PasswordHash = "AnbbgygyyGTD4866756%%$%f",
            Username = "pochita53456376597"
        };
        
        Client.DefaultRequestHeaders.Authorization = 
            new AuthenticationHeaderValue("Bearer", result.Tokens.Token);

        HttpResponseMessage message = await Client.PatchAsJsonAsync(_url, dto);
        _output.WriteLine(message.Content.ReadAsStringAsync().Result);
        message.StatusCode.Should().Be(HttpStatusCode.OK);
        
    }
    
}